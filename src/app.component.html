<main class="app-main">
  <div class="container">
    <header class="app-header">
      <h1 class="app-title">
        Dynamic Story Loader
      </h1>
      <p class="app-subtitle">
        This story is loaded at runtime from a nested JSON file.
      </p>
    </header>

    @if (loading()) {
      <div class="loader-container">
        <mat-progress-spinner mode="indeterminate" diameter="60"></mat-progress-spinner>
        <p class="loader-text">Loading Story...</p>
      </div>
    } @else if (error(); as errorMessage) {
      <div class="error-alert" role="alert">
        <strong>Error:</strong>
        <span>{{ errorMessage }}</span>
      </div>
    } @else if (story(); as currentStory) {
      <header class="story-main-header">
        <h2 class="story-main-title">{{ currentStory.title }}</h2>
        <p class="story-main-author">by {{ currentStory.author }}</p>
      </header>
      
      <div class="chapters-container">
        @for (chapter of currentStory.chapters; track chapter.title; let i = $index) {
          <mat-card class="chapter-card" animate.enter="chapter-enter-animation" [style.--index]="i">
            <mat-card-header>
              <mat-card-title>{{ chapter.title }}</mat-card-title>
            </mat-card-header>
            <mat-card-content class="chapter-content">
              @for (paragraph of chapter.content; track $index) {
                <p>{{ paragraph }}</p>
              }
            </mat-card-content>
          </mat-card>
        }
      </div>
    }
  </div>
</main>